{% extends "includes/../includes/base.html" %}
{% load static %}

{% block content %}



<div class="container text-center my-3">
<div class="container card">
    <div class="row">
        <div id="payment-form" class="col-12 col-lg-6 mx-auto">
          <h3 class="my-3">Billing address</h3>
          <!-- Error messages in this element -->
          <div id="card-errors" class="a" role="alert"></div>
          <form method="POST" action="{% url 'orders:add' %}">
            <div class="row">
              <div class="col-md-6 mb-2 pb-2">
                <label for="firstName" class="form-label">First Name</label>
                <input type="text" required class="form-control" id="firstName" value='{{request.user.first_name}}' placeholder="">
                <div class="invalid-feedback">
                  Valid first name is required.
                </div>
              </div>
              <div class="col-md-6 mb-2 pb-2">
                <label for="lastName" class="form-label">Last Name</label>
                <input type="text"  class="form-control" id="lastName" value='{{request.user.last_name}}' placeholder="">
                <div class="invalid-feedback">
                  Valid last name is required.
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-2 pb-2">
                <label for="phone_number" class="form-label">Phone number</label>
                <input type="text" required class="form-control" name='phone_number' id="id_phone_number" value='{% if request.user.userprofile.phone_number %}{{request.user.userprofile.phone_number}}{% endif %}' placeholder="">
              </div>
              <div class="col-md-6 mb-2 pb-2">
                <label for="email_address" class="form-label">Email address</label>
                <input type="email" required readonly class="form-control" name='email_address' id="id_email_address" value='{{request.user.email}}' onfocus="showEmailInfo()" onblur="hideEmailInfo()">
                <div id="email-info" class="text-muted" style="display: none;">In order to change email address please contact our customer service.</div>

              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <label class="form-label" for="address">Address</label>
                <input type="text" required name="address" value='{% if request.user.userprofile.address %}{{request.user.userprofile.address}}{% endif %}' maxlength="250" class="form-control form-control-lg pac-target-input" id="id_address" placeholder="Enter a location" autocomplete="off">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-2 pb-2">
                <label class="form-label" for="state">District</label>
                <input type="text" required name="state" value='{% if request.user.userprofile.state %}{{request.user.userprofile.state}}{% endif %}' maxlength="40" class="form-control form-control-lg" id="id_state">
              </div>
              <div class="col-md-6 mb-2 pb-2">
                <label class="form-label" for="city">City</label>
                <input type="text" required name="city" value='{% if request.user.userprofile.city %}{{request.user.userprofile.city}}{% endif %}' maxlength="16" class="form-control form-control-lg" id="id_city">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-2 pb-2">
                <label class="form-label" for="pin_code">Postal Code</label>
                <input type="text" required name="pin_code" value='{% if request.user.userprofile.pin_code %}{{request.user.userprofile.pin_code}}{% endif %}' maxlength="15" class="form-control form-control-lg" id="id_pin_code">
              </div>
              <div class="col-md-6 mb-2 pb-2">
                <label class="form-label" for="country  ">Country</label>
                <input type="text" required name="country" value='{% if request.user.userprofile.country %}{{request.user.userprofile.country }}{% endif %}' maxlength="16" class="form-control form-control-lg" id="id_country">
            </div>
          </div>
            <h4 class="mb-1">Payment</h4>
            <label for="card-element">Credit or debit card</label>
            <div id="card-element" class="form-control form-control-payment">
              <!-- Payment elements will appear here -->
            </div>

            <button id="submit" class="btn btn-primary w-100 fw-bold my-3" data-secret="{{ client_secret }}">Pay</button>
          </form>


        </div>
    </div>
</div>
<script>
    var CSRF_TOKEN = '{{ csrf_token }}'
    function showEmailInfo() {
      $('#email-info').show();
  }
  function hideEmailInfo() {
    $('#email-info').hide();
}
</script>
<script src="https://js.stripe.com/v3/"></script>
<script src="{% static 'js/payment.js' %}" data-rel-js></script>
{% endblock content %}

